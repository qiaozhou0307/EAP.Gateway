{
  "// appsettings.json - 生命周期修复后的配置示例": "",

  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Database=EapGateway;Username=eap_user;Password=your_password;Port=5432;Pooling=true;Minimum Pool Size=2;Maximum Pool Size=20;Connection Idle Lifetime=300;",
    "Redis": "localhost:6379,abortConnect=false,connectRetry=3,connectTimeout=5000,syncTimeout=5000"
  },

  "ConnectionManager": {
    "MaxConcurrentConnections": 10,
    "ConnectionRequestQueueSize": 100,
    "HealthCheckIntervalSeconds": 30,
    "CleanupIntervalMinutes": 5,
    "StaleConnectionThresholdMinutes": 15,
    "ConnectionTimeoutSeconds": 30,
    "ReconnectionMaxAttempts": 3,
    "ReconnectionDelaySeconds": 5
  },

  "SecsGem": {
    "MaxConcurrentMessages": 10,
    "EnableDetailedLogging": false,
    "EnableMetrics": true,
    "RetryOptions": {
      "MaxRetries": 3,
      "BaseDelay": "00:00:01",
      "MaxDelay": "00:00:30"
    },
    "TimeoutOptions": {
      "T3Timeout": "00:00:45",
      "T5Timeout": "00:00:10",
      "T6Timeout": "00:00:05",
      "T7Timeout": "00:00:10",
      "T8Timeout": "00:00:06"
    }
  },

  "DeviceMonitoring": {
    "EnableMonitoring": true,
    "MonitoringIntervalSeconds": 30,
    "ErrorRetryDelaySeconds": 10,
    "HealthCheckTimeoutSeconds": 5
  },

  "Kafka": {
    "BootstrapServers": "localhost:9092",
    "ClientId": "EAP.Gateway",
    "EnableAutoOffsetStore": true,
    "SecurityProtocol": "PlainText",
    "Topics": {
      "EquipmentData": "eap.equipment.data",
      "AlarmEvents": "eap.alarm.events",
      "CheckData": "eap.check.data",
      "GoldenSampleData": "eap.golden.sample.data",
      "YieldData": "eap.yield.data"
    },
    "ProducerConfig": {
      "EnableIdempotence": true,
      "RetryBackoffMs": 100,
      "MessageTimeoutMs": 30000,
      "RequestTimeoutMs": 30000,
      "BatchSize": 16384,
      "LingerMs": 5,
      "CompressionType": "Gzip"
    }
  },

  "RabbitMQ": {
    "HostName": "localhost",
    "Port": 5672,
    "UserName": "guest",
    "Password": "guest",
    "VirtualHost": "/",
    "Exchanges": {
      "Commands": "eap.commands",
      "Events": "eap.events"
    },
    "Queues": {
      "CommandQueue": "eap.command.queue",
      "CommandAckQueue": "eap.command.ack.queue"
    }
  },

  "Jwt": {
    "SecretKey": "your-super-secret-key-that-is-at-least-256-bits-long",
    "Issuer": "EAP.Gateway",
    "Audience": "EAP.Gateway.Api",
    "ExpirationMinutes": 60
  },

  "Cors": {
    "AllowedOrigins": [
      "http://localhost:3000",
      "https://localhost:3001",
      "https://your-frontend-domain.com"
    ],
    "AllowedMethods": [ "GET", "POST", "PUT", "DELETE", "OPTIONS" ],
    "AllowedHeaders": [ "*" ],
    "AllowCredentials": true
  },

  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File", "Serilog.Sinks.Grafana.Loki" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.Hosting.Lifetime": "Information",
        "Microsoft.EntityFrameworkCore": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {SourceContext}: {Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/eap-gateway-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 30,
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} {Level:u3}] {SourceContext}: {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      },
      {
        "Name": "GrafanaLoki",
        "Args": {
          "uri": "http://localhost:3100",
          "labels": [
            {
              "key": "app",
              "value": "eap-gateway"
            },
            {
              "key": "environment",
              "value": "development"
            }
          ]
        }
      }
    ],
    "Enrich": [
      "FromLogContext",
      "WithMachineName",
      "WithProcessId",
      "WithThreadId"
    ],
    "Properties": {
      "Application": "EAP.Gateway"
    }
  },

  "HealthChecks": {
    "EvaluationTimeInSeconds": 10,
    "MinimumSecondsBetweenFailureNotifications": 60
  },

  "// Development environment specific settings": "",
  "DetailedErrors": true,
  "EnableSensitiveDataLogging": true
}
